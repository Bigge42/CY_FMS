
---

### 1. **直接上传文件接口**
- **路径**: `http://10.11.0.20:8088/fms/ftp/upload`
- **请求方法**: `POST`
- **请求参数**:
  - `file` (必填): 上传的文件，类型为 `MultipartFile`。
  - `DocumentTypeID` (必填): 文档类型ID，类型为 `Integer`，根据此ID确定文件类型，如材质理化报告、合格证等。
  - `matchID` (必填): 匹配ID，类型为 `String`，用于标识该文件所属的匹配记录。
  - `PlanTrackingNumber` (选填): 计划跟踪号，类型为 `String`，用于标识计划的编号。
  - `createdBy` (必填): 创建人，类型为 `String`，记录该文件的上传者。
- **请求示例**:
    ```bash
    curl -X POST http://10.11.0.20:8088/fms/ftp/upload \
    -F "file=@/path/to/file.pdf" \
    -F "DocumentTypeID=1" \
    -F "matchID=12345" \
    -F "createdBy=admin"
    ```
- **响应**:
  - 成功: 返回 `200 OK`，并包含文件ID。
    ```json
    {
        "code": 200,
        "msg": "文件上传成功并已存储到数据库",
        "data": "MAN20250218155312030"
    }
    ```
  - 失败: 返回 `500 Internal Server Error`，并包含错误信息。
    ```json
    {
        "code": 500,
        "msg": "上传的文件为空"
    }
    ```
- **注意**:
  - **不支持上传包含中文和空格的文件名**。上传时，文件名必须是英文字符或包含数字、下划线、连字符等。
- **描述**: 用于直接上传文件，上传后保存到服务器的指定目录，并在数据库中记录文件的相关信息。此接口支持不进行转换，直接上传原始文件。

---

### 2. **上传文件后转换为 PDF 接口**
- **路径**: `http://10.11.0.20:8088/fms/ftp/uploadToPdf`
- **请求方法**: `POST`
- **请求参数**:
  - `file` (必填): 上传的文件，类型为 `MultipartFile`。
  - `DocumentTypeID` (必填): 文档类型ID，类型为 `Integer`。
  - `matchID` (必填): 匹配ID，类型为 `String`。
  - `PlanTrackingNumber` (选填): 计划跟踪号，类型为 `String`。
  - `createdBy` (必填): 创建人，类型为 `String`。
- **请求示例**:
    ```bash
    curl -X POST http://10.11.0.20:8088/fms/ftp/uploadToPdf \
    -F "file=@/path/to/file.docx" \
    -F "DocumentTypeID=1" \
    -F "matchID=12345" \
    -F "createdBy=admin"
    ```
- **响应**:
  - 成功: 返回 `200 OK`，并包含文件ID。
    ```json
    {
        "code": 200,
        "msg": "文件上传成功并已存储到数据库",
        "data": "MAN20250218155312031"
    }
    ```
  - 失败: 返回 `500 Internal Server Error`，并包含错误信息。
    ```json
    {
        "code": 500,
        "msg": "文件转换为 PDF 失败"
    }
    ```
- **注意**:
  - **不支持上传包含中文和空格的文件名**。上传时，文件名必须是英文字符或包含数字、下划线、连字符等。
- **描述**: 上传文件并进行格式转换，如果上传的是非PDF文件（如Word、Excel等），会将其转换为PDF格式并存储。

---

### 3. **下载文件接口**
- **路径**: `http://10.11.0.20:8088/fms/ftp/download`
- **请求方法**: `GET`
- **请求参数**:
  - `fileId` (必填): 文件ID，类型为 `String`，通过文件ID查询文件的下载路径。
- **请求示例**:
    ```bash
    curl -X GET "http://10.11.0.20:8088/fms/ftp/download?fileId=MAN20250218155312030"
    ```
- **响应**:
  - 成功: 返回文件内容，用户可以下载文件。
  - 失败: 返回 `404 Not Found`，未找到文件。
    ```json
    {
        "code": 404,
        "msg": "文件未找到"
    }
    ```
- **描述**: 根据提供的 `fileId`，从服务器获取并下载文件。

---

### 4. **在线预览文件接口**
- **路径**: `http://10.11.0.20:8088/fms/ftp/preview`
- **请求方法**: `GET`
- **请求参数**:
  - `fileId` (必填): 文件ID，类型为 `String`，用于从数据库中查找文件路径。
- **请求示例**:
    ```bash
    curl -X GET "http://10.11.0.20:8088/fms/ftp/preview?fileId=MAN20250218155312030"
    ```
- **响应**:
  - 成功: 返回文件内容，直接在浏览器中预览。
  - 失败: 返回 `404 Not Found`，未找到文件。
    ```json
    {
        "code": 404,
        "msg": "文件未找到"
    }
    ```
- **描述**: 根据文件ID提供文件的在线预览，适用于浏览器内直接查看文件内容（如PDF文件）。

---

### 5. **根据 `matchID` 和 `documentTypeID` 查询文件ID集合接口**
- **路径**: `http://10.11.0.20:8088/fms/ftp/getFileIDs`
- **请求方法**: `GET`
- **请求参数**:
  - `matchID` (选填): 匹配ID，类型为 `String`，根据匹配ID查询文件。
  - `documentTypeID` (选填): 文档类型ID，类型为 `Integer`，根据文档类型ID查询文件。
- **请求示例**:
    ```bash
    curl -X GET "http://10.11.0.20:8088/fms/ftp/getFileIDs?matchID=12345"
    curl -X GET "http://10.11.0.20:8088/fms/ftp/getFileIDs?documentTypeID=1"
    curl -X GET "http://10.11.0.20:8088/fms/ftp/getFileIDs?matchID=12345&documentTypeID=1"
    ```
- **响应**:
  - 成功: 返回 `200 OK`，包含文件ID集合。
    ```json
    {
        "code": 200,
        "msg": "查询成功",
        "data": ["MAN20250218155312030", "MAN20250218155312031"]
    }
    ```
  - 失败: 返回 `500 Internal Server Error`，并包含错误信息。
    ```json
    {
        "code": 500,
        "msg": "查询文件ID失败"
    }
    ```
- **描述**: 根据提供的 `matchID` 和/或 `documentTypeID` 查询文件ID集合，至少提供一个参数进行查询。

---

### 注意事项:
1. **上传文件时文件名要求**：目前接口上传文件时，不支持文件名中包含中文字符或空格。请确保上传的文件名是英文字符、数字、下划线、连字符等合法字符的组合。
2. **错误处理**：对于上传文件接口，确保用户提供了必需的参数（如 `matchID` 和 `documentTypeID`）。如果未提供这些参数，接口将返回错误提示。
3. **文件格式**：上传的文件格式可以是多种类型，支持转换为 PDF 格式。

---

